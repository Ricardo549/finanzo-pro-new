import{j as k,C as ao}from"./index-3sitiY3z.js";import{h as Go,r as wn,R as Yo}from"./vendor-react-RIkaRMH6.js";import{E as Vo}from"./EmptyState-CqW8ZJwz.js";import{a as to}from"./vendor-data-BBwWKR5w.js";import{X as Jo,a6 as Zo,L as Ko,ah as Xo,ai as Qo,m as ei,n as ni}from"./vendor-ui-g_Djd6fr.js";var so={exports:{}};(function(m,S){(function(q,W){m.exports=W()})(typeof self<"u"?self:Go,function(){return function(q){var W={};function O(b){if(W[b])return W[b].exports;var x=W[b]={i:b,l:!1,exports:{}};return q[b].call(x.exports,x,x.exports,O),x.l=!0,x.exports}return O.m=q,O.c=W,O.d=function(b,x,C){O.o(b,x)||Object.defineProperty(b,x,{enumerable:!0,get:C})},O.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},O.t=function(b,x){if(1&x&&(b=O(b)),8&x||4&x&&typeof b=="object"&&b&&b.__esModule)return b;var C=Object.create(null);if(O.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:b}),2&x&&typeof b!="string")for(var M in b)O.d(C,M,(function(X){return b[X]}).bind(null,M));return C},O.n=function(b){var x=b&&b.__esModule?function(){return b.default}:function(){return b};return O.d(x,"a",x),x},O.o=function(b,x){return{}.hasOwnProperty.call(b,x)},O.p="",O(O.s=0)}([function(q,W,O){O.r(W),O.d(W,"PopupOpenError",function(){return yo}),O.d(W,"create",function(){return Uo}),O.d(W,"destroy",function(){return Bo}),O.d(W,"destroyComponents",function(){return Gt}),O.d(W,"destroyAll",function(){return Yt}),O.d(W,"PROP_TYPE",function(){return Ao}),O.d(W,"PROP_SERIALIZATION",function(){return Er}),O.d(W,"CONTEXT",function(){return Pe}),O.d(W,"EVENT",function(){return se});function b(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function x(){return(x=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function C(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var M=[],X=[],Q=0,We;function Tn(){if(!Q&&We){var e=We;We=null,e.resolve()}}function gn(){Q+=1}function yn(){Q-=1,Tn()}var p=function(){function e(n){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var o,i,a=!1,s=!1,f=!1;gn();try{n(function(u){f?t.resolve(u):(a=!0,o=u)},function(u){f?t.reject(u):(s=!0,i=u)})}catch(u){yn(),this.reject(u);return}yn(),f=!0,a?this.resolve(o):s&&this.reject(i)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(C(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var t=this;if(this.resolved||this.rejected)return this;if(C(n))throw new Error("Can not reject promise with another promise");if(!n){var o=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+o)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){t.errorHandled||function(i,a){if(M.indexOf(i)===-1){M.push(i),setTimeout(function(){throw i},1);for(var s=0;s<X.length;s++)X[s](i,a)}}(n,t)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,t=this.rejected,o=this.handlers;if(!this.dispatching&&(n||t)){this.dispatching=!0,gn();for(var i=function(l,h){return l.then(function(w){h.resolve(w)},function(w){h.reject(w)})},a=0;a<o.length;a++){var s=o[a],f=s.onSuccess,u=s.onError,c=s.promise,d=void 0;if(n)try{d=f?f(this.value):this.value}catch(l){c.reject(l);continue}else if(t){if(!u){c.reject(this.error);continue}try{d=u(this.error)}catch(l){c.reject(l);continue}}d instanceof e&&(d.resolved||d.rejected)?(d.resolved?c.resolve(d.value):c.reject(d.error),d.errorHandled=!0):C(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?c.resolve(d.value):c.reject(d.error):i(d,c):c.resolve(d)}o.length=0,this.dispatching=!1,yn()}},r.then=function(n,t){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(t&&typeof t!="function"&&!t.call)throw new Error("Promise.then expected a function for error handler");var o=new e;return this.handlers.push({promise:o,onSuccess:n,onError:t}),this.errorHandled=!0,this.dispatch(),o},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(t){return e.try(n).then(function(){return t})},function(t){return e.try(n).then(function(){throw t})})},r.timeout=function(n,t){var o=this;if(this.resolved||this.rejected)return this;var i=setTimeout(function(){o.resolved||o.rejected||o.reject(t||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(a){return clearTimeout(i),a})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(n){return n instanceof e?n:C(n)?new e(function(t,o){return n.then(t,o)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var t=new e,o=n.length,i=[];if(!o)return t.resolve(i),t;for(var a=function(u,c,d){return c.then(function(l){i[u]=l,(o-=1)==0&&t.resolve(i)},function(l){d.reject(l)})},s=0;s<n.length;s++){var f=n[s];if(f instanceof e){if(f.resolved){i[s]=f.value,o-=1;continue}}else if(!C(f)){i[s]=f,o-=1;continue}a(s,e.resolve(f),t)}return o===0&&t.resolve(i),t},e.hash=function(n){var t={},o=[],i=function(s){if(n.hasOwnProperty(s)){var f=n[s];C(f)?o.push(f.then(function(u){t[s]=u})):t[s]=f}};for(var a in n)i(a);return e.all(o).then(function(){return t})},e.map=function(n,t){return e.all(n.map(t))},e.onPossiblyUnhandledException=function(n){return function(t){return X.push(t),{cancel:function(){X.splice(X.indexOf(t),1)}}}(n)},e.try=function(n,t,o){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var i;gn();try{i=n.apply(t,o||[])}catch(a){return yn(),e.reject(a)}return yn(),e.resolve(i)},e.delay=function(n){return new e(function(t){setTimeout(t,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||C(n)},e.flush=function(){return function(n){var t=We=We||new n;return Tn(),t}(e)},e}();function En(e){return{}.toString.call(e)==="[object RegExp]"}var sn={IFRAME:"iframe",POPUP:"popup"},Ye=`Call was rejected by callee.\r
`;function Xe(e){return e===void 0&&(e=window),e.location.protocol==="about:"}function Be(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function bn(e){if(e===void 0&&(e=window),e&&!Be(e))try{return e.opener}catch{}}function Mn(e){try{return!0}catch{}return!1}function Ve(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=r.protocol;if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var t=Be(e);return t&&Mn()?Ve(t):"about://"}var o=r.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function Y(e){e===void 0&&(e=window);var r=Ve(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function be(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(Xe(r)&&Mn())return!0}catch{}try{if(Ve(r)===Ve(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||Xe(e)&&Mn()||Y(window)===Y(e))return!0}catch{}return!1}function Je(e){if(!be(e))throw new Error("Expected window to be same domain");return e}function Zr(e,r){if(!e||!r)return!1;var n=Be(r);return n?n===e:function(t){var o=[];try{for(;t.parent!==t;)o.push(t.parent),t=t.parent}catch{}return o}(r).indexOf(e)!==-1}function Kr(e){var r=[],n;try{n=e.frames}catch{n=e}var t;try{t=n.length}catch{}if(t===0)return r;if(t){for(var o=0;o<t;o++){var i=void 0;try{i=n[o]}catch{continue}r.push(i)}return r}for(var a=0;a<100;a++){var s=void 0;try{s=n[a]}catch{return r}if(!s)return r;r.push(s)}return r}function or(e){for(var r=[],n=0,t=Kr(e);n<t.length;n++){var o=t[n];r.push(o);for(var i=0,a=or(o);i<a.length;i++)r.push(a[i])}return r}function ir(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(Be(e)===e)return e;try{if(Zr(window,e)&&window.top)return window.top}catch{}try{if(Zr(e,window)&&window.top)return window.top}catch{}for(var r=0,n=or(e);r<n.length;r++){var t=n[r];try{if(t.top)return t.top}catch{}if(Be(t)===t)return t}}function _n(e){var r=ir(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(or(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],or(e))),n}var qn=[],Sr=[];function xe(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(o){return!o||o.message!==Ye}if(r&&be(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(o,i){for(var a=0;a<o.length;a++)try{if(o[a]===i)return a}catch{}return-1}(qn,e);if(n!==-1){var t=Sr[n];if(t&&function(o){if(!o.contentWindow||!o.parentNode)return!0;var i=o.ownerDocument;if(i&&i.documentElement&&!i.documentElement.contains(o)){for(var a=o;a.parentNode&&a.parentNode!==a;)a=a.parentNode;if(!a.host||!i.documentElement.contains(a.host))return!0}return!1}(t))return!0}return!1}function Nr(e){return e===void 0&&(e=window),bn(e=e||window)||Be(e)||void 0}function Rr(e,r){for(var n=0;n<e.length;n++)for(var t=e[n],o=0;o<r.length;o++)if(t===r[o])return!0;return!1}function Xr(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=Be(n))&&(r+=1);return r}function Qr(e,r){var n=ir(e)||e,t=ir(r)||r;try{if(n&&t)return n===t}catch{}var o=_n(e),i=_n(r);if(Rr(o,i))return!0;var a=bn(n),s=bn(t);return a&&Rr(_n(a),i)||s&&Rr(_n(s),o),!1}function Qe(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(En(r)||Array.isArray(r))return!1}return En(e)?En(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!En(r)&&e.some(function(n){return Qe(n,r)}))}function et(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):Y()}function nt(e,r,n,t){n===void 0&&(n=1e3),t===void 0&&(t=1/0);var o;return function i(){if(xe(e))return o&&clearTimeout(o),r();t<=0?clearTimeout(o):(t-=n,o=setTimeout(i,n))}(),{cancel:function(){o&&clearTimeout(o)}}}function xn(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Ye)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Ye)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Ye)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Ye)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Ye)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Ye)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function lo(e){try{e.close()}catch{}}function ar(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var sr=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,t={};return Object.freeze(t),n.set(t,"__testvalue__"),n.get(t)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,t=this.keys,o=0;o<t.length;o++){var i=t[o];if(xn(i)&&xe(i)){if(n)try{n.delete(i)}catch{}t.splice(o,1),this.values.splice(o,1),o-=1}}},r.isSafeToReadWrite=function(n){return!xn(n)},r.set=function(n,t){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{o.set(n,t)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var i=this.name,a=n[i];a&&a[0]===n?a[1]=t:Object.defineProperty(n,i,{value:[n,t],writable:!0});return}catch{}this._cleanupClosedWindows();var s=this.keys,f=this.values,u=ar(s,n);u===-1?(s.push(n),f.push(t)):f[u]=t},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return t.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var o=n[this.name];return o&&o[0]===n?o[1]:void 0}catch{}this._cleanupClosedWindows();var i=ar(this.keys,n);if(i!==-1)return this.values[i]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var o=n[this.name];o&&o[0]===n&&(o[0]=o[1]=void 0)}catch{}this._cleanupClosedWindows();var i=this.keys,a=ar(i,n);a!==-1&&(i.splice(a,1),this.values.splice(a,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var o=n[this.name];return!(!o||o[0]!==n)}catch{}return this._cleanupClosedWindows(),ar(this.keys,n)!==-1},r.getOrSet=function(n,t){if(this.has(n))return this.get(n);var o=t();return this.set(n,o),o},e}();function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function Wr(e,r){return(Wr=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(e,r)}function ho(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function tt(e,r,n){return(tt=ho()?Reflect.construct:function(t,o,i){var a=[null];a.push.apply(a,o);var s=new(Function.bind.apply(t,a));return i&&Wr(s,i.prototype),s}).apply(null,arguments)}function ot(e){var r=typeof Map=="function"?new Map:void 0;return(ot=function(n){if(n===null||(t=n,Function.toString.call(t).indexOf("[native code]")===-1))return n;var t;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,o)}function o(){return tt(n,arguments,rt(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Wr(o,n)})(e)}function Dr(e){return e.name||e.__name__||e.displayName||"anonymous"}function Ar(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function it(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))}));if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}function De(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+it(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var ur;function Tr(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(t){if(ur=ur||new sr,t==null||typeof t!="object"&&typeof t!="function")throw new Error("Invalid object");var o=ur.get(t);return o||(o=typeof t+":"+De(),ur.set(t,o)),o}(n)+"]":n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function po(){return{}}var $n=0,at=0;function Pn(e,r){r===void 0&&(r={});var n=r.thisNamespace,t=n!==void 0&&n,o=r.time,i,a,s=$n;$n+=1;var f=function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];s<at&&(i=null,a=null,s=$n,$n+=1);var l;l=t?(a=a||new sr).getOrSet(this,po):i=i||{};var h=Tr(c),w=l[h];if(w&&o&&Date.now()-w.time<o&&(delete l[h],w=null),w)return w.value;var y=Date.now(),F=e.apply(this,arguments);return l[h]={time:y,value:F},F};return f.reset=function(){i=null,a=null},Ar(f,(r.name||Dr(e))+"::memoized")}Pn.clear=function(){at=$n};function vo(e){var r={};function n(){for(var t=arguments,o=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var f=Tr(a);return r.hasOwnProperty(f)||(r[f]=p.try(function(){return e.apply(o,t)}).finally(function(){delete r[f]})),r[f]}return n.reset=function(){r={}},Ar(n,Dr(e)+"::promiseMemoized")}function st(e,r,n){n===void 0&&(n=[]);var t=e.__inline_memoize_cache__=e.__inline_memoize_cache__||{},o=Tr(n);return t.hasOwnProperty(o)?t[o]:t[o]=r.apply(void 0,n)}function fe(){}function cr(e){var r=!1;return Ar(function(){if(!r)return r=!0,e.apply(this,arguments)},Dr(e)+"::once")}function Cn(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,t=e&&e.message;if(n&&t)return n.indexOf(t)!==-1?n:t+`
`+n;if(n)return n;if(t)return t}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(o){return"Error while stringifying error: "+Cn(o,r+1)}}function zr(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Un(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Pn(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function mo(e){return e}function Bn(e,r){var n;return function t(){n=setTimeout(function(){e(),t()},r)}(),{cancel:function(){clearTimeout(n)}}}function ut(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var t=n();return e[r]=t,t},set:function(t){delete e[r],e[r]=t}})}function Ir(e){return[].slice.call(e)}function ct(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function Fr(e){if(!ct(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!ct(n)&&!!n.hasOwnProperty("isPrototypeOf")}function dr(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var t=e.length,o=[],i=function(c){ut(o,c,function(){var d=n?n+"."+c:""+c,l=r(e[c],c,d);return(Fr(l)||Array.isArray(l))&&(l=dr(l,r,d)),l})},a=0;a<t;a++)i(a);return o}if(Fr(e)){var s={},f=function(c){if(!e.hasOwnProperty(c))return"continue";ut(s,c,function(){var d=n?n+"."+c:""+c,l=r(e[c],c,d);return(Fr(l)||Array.isArray(l))&&(l=dr(l,r,d)),l})};for(var u in e)f(u);return s}throw new Error("Pass an object or array")}function On(e){return e!=null}function fr(e){return{}.toString.call(e)==="[object RegExp]"}function kn(e,r,n){if(e.hasOwnProperty(r))return e[r];var t=n();return e[r]=t,t}function lr(e){var r=[],n=!1,t;return{set:function(o,i){return n||(e[o]=i,this.register(function(){delete e[o]})),i},register:function(o){n?o(t):r.push(cr(function(){return o(t)}))},all:function(o){t=o;var i=[];for(n=!0;r.length;){var a=r.shift();i.push(a())}return p.all(i).then(fe)}}}function jr(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var wo=function(e){b(r,e);function r(n){var t;return(t=e.call(this,n)||this).name=t.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(t),t.constructor):t.stack=new Error(n).stack,t}return r}(ot(Error));function hr(){return!!document.body&&document.readyState==="complete"}function dt(){return!!document.body&&document.readyState==="interactive"}function ft(e){return e.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")}Pn(function(){return new p(function(e){if(hr()||dt())return e();var r=setInterval(function(){if(hr()||dt())return clearInterval(r),e()},10)})});function lt(e){return st(lt,function(){var r={};if(!e||e.indexOf("=")===-1)return r;for(var n=0,t=e.split("&");n<t.length;n++){var o=t[n];(o=o.split("="))[0]&&o[1]&&(r[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return r},[e])}function ht(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(t){return typeof n[t]=="string"}).map(function(t){return ft(t)+"="+ft(n[t])}).join("&")}(x({},lt(e),r)):e}function go(e,r){e.appendChild(r)}function pt(e){return e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}function Lr(e,r){return r===void 0&&(r=document),pt(e)?e:typeof e=="string"?r.querySelector(e):void 0}function vt(e){return new p(function(r,n){var t=zr(e),o=Lr(e);if(o)return r(o);if(hr())return n(new Error("Document is ready and element "+t+" does not exist"));var i=setInterval(function(){if(o=Lr(e))return clearInterval(i),r(o);if(hr())return clearInterval(i),n(new Error("Document is ready and element "+t+" does not exist"))},10)})}var yo=function(e){b(r,e);function r(){return e.apply(this,arguments)||this}return r}(wo),pr;function mt(e){if((pr=pr||new sr).has(e)){var r=pr.get(e);if(r)return r}var n=new p(function(t,o){e.addEventListener("load",function(){(function(i){if(function(){for(var a=0;a<qn.length;a++){var s=!1;try{s=qn[a].closed}catch{}s&&(Sr.splice(a,1),qn.splice(a,1))}}(),i&&i.contentWindow)try{qn.push(i.contentWindow),Sr.push(i)}catch{}})(e),t(e)}),e.addEventListener("error",function(i){e.contentWindow?t(e):o(i)})});return pr.set(e,n),n}function Mr(e){return mt(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function wt(e,r){e===void 0&&(e={});var n=e.style||{},t=function(i,a,s){i===void 0&&(i="div"),a===void 0&&(a={}),i=i.toLowerCase();var f=document.createElement(i);if(a.style&&Un(f.style,a.style),a.class&&(f.className=a.class.join(" ")),a.id&&f.setAttribute("id",a.id),a.attributes)for(var u=0,c=Object.keys(a.attributes);u<c.length;u++){var d=c[u];f.setAttribute(d,a.attributes[d])}if(a.styleSheet&&function(l,h,w){w===void 0&&(w=window.document),l.styleSheet?l.styleSheet.cssText=h:l.appendChild(w.createTextNode(h))}(f,a.styleSheet),a.html){if(i==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");f.innerHTML=a.html}return f}("iframe",{attributes:x({allowTransparency:"true"},e.attributes||{}),style:x({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),o=window.navigator.userAgent.match(/MSIE|Edge/i);return t.hasAttribute("id")||t.setAttribute("id",De()),mt(t),(e.url||o)&&t.setAttribute("src",e.url||"about:blank"),t}function gt(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Eo(e){e.style.setProperty("display","")}function yt(e){e.style.setProperty("display","none","important")}function Hn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _r(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Et(e,r,n){var t=n===void 0?{}:n,o=t.width,i=o===void 0||o,a=t.height,s=a===void 0||a,f=t.interval,u=f===void 0?100:f,c=t.win,d=c===void 0?window:c,l=e.offsetWidth,h=e.offsetHeight,w=!1;r({width:l,height:h});var y=function(){if(!w&&function(z){return!!(z.offsetWidth||z.offsetHeight||z.getClientRects().length)}(e)){var T=e.offsetWidth,$=e.offsetHeight;(i&&T!==l||s&&$!==h)&&r({width:T,height:$}),l=T,h=$}},F,_;return d.addEventListener("resize",y),d.ResizeObserver!==void 0?((F=new d.ResizeObserver(y)).observe(e),_=Bn(y,10*u)):d.MutationObserver!==void 0?((F=new d.MutationObserver(y)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),_=Bn(y,10*u)):_=Bn(y,u),{cancel:function(){w=!0,F.disconnect(),window.removeEventListener("resize",y),_.cancel()}}}function qr(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var vr=typeof document<"u"?document.currentScript:null,bo=Pn(function(){if(vr||(vr=function(){try{var e=function(){try{throw new Error("_")}catch(a){return a.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var t=0,o=[].slice.call(document.getElementsByTagName("script")).reverse();t<o.length;t++){var i=o[t];if(i.src&&i.src===n)return i}}catch{}}()))return vr;throw new Error("Can not determine current script")}),xo=De();Pn(function(){var e;try{e=bo()}catch{return xo}var r=e.getAttribute("data-uid");return r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string"||(r=De(),e.setAttribute("data-uid-auto",r)),r});function bt(e){return function(r){if(typeof r=="number")return r;var n=r.match(/^([0-9]+)(px|%)$/);if(!n)throw new Error("Could not match css value from "+r);return parseInt(n[1],10)}(e)+"px"}function xt(e){return typeof e=="number"?bt(e):typeof(r=e)=="string"&&/^[0-9]+%$/.test(r)?e:bt(e);var r}function zn(e){e===void 0&&(e=window);var r="__post_robot_10_0_42__";return e!==window?e[r]:e[r]=e[r]||{}}var Pt=function(){return{}};function ge(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Pt),kn(zn(),e,function(){var n=r();return{has:function(t){return n.hasOwnProperty(t)},get:function(t,o){return n.hasOwnProperty(t)?n[t]:o},set:function(t,o){return n[t]=o,o},del:function(t){delete n[t]},getOrSet:function(t,o){return kn(n,t,o)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var Po=function(){};function mr(){var e=zn();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new Po,e.WINDOW_WILDCARD}function Fe(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Pt),ge("windowStore").getOrSet(e,function(){var n=new sr,t=function(o){return n.getOrSet(o,r)};return{has:function(o){return t(o).hasOwnProperty(e)},get:function(o,i){var a=t(o);return a.hasOwnProperty(e)?a[e]:i},set:function(o,i){return t(o)[e]=i,i},del:function(o){delete t(o)[e]},getOrSet:function(o,i){return kn(t(o),e,i)}}})}function Ct(){return ge("instance").getOrSet("instanceID",De)}function Ot(e,r){var n=r.domain,t=Fe("helloPromises"),o=t.get(e);o&&o.resolve({domain:n});var i=p.resolve({domain:n});return t.set(e,i),i}function $r(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:Ct()},{domain:"*",timeout:-1}).then(function(n){var t=n.origin,o=n.data.instanceID;return Ot(e,{domain:t}),{win:e,domain:t,instanceID:o}})}function St(e,r){var n=r.send;return Fe("windowInstanceIDPromises").getOrSet(e,function(){return $r(e,{send:n}).then(function(t){return t.instanceID})})}function Nt(e){Fe("knownWindows").set(e,!0)}function Ur(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Rt(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function In(e,r){return{__type__:e,__val__:r}}var ke,Co=((ke={}).function=function(){},ke.error=function(e){return In("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},ke.promise=function(){},ke.regex=function(e){return In("regex",e.source)},ke.date=function(e){return In("date",e.toJSON())},ke.array=function(e){return e},ke.object=function(e){return e},ke.string=function(e){return e},ke.number=function(e){return e},ke.boolean=function(e){return e},ke.null=function(e){return e},ke),Oo={},He,So=((He={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},He.error=function(e){var r=e.stack,n=e.code,t=e.data,o=new Error(e.message);return o.code=n,t&&(o.data=t),o.stack=r+`

`+o.stack,o},He.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},He.regex=function(e){return new RegExp(e)},He.date=function(e){return new Date(e)},He.array=function(e){return e},He.object=function(e){return e},He.string=function(e){return e},He.number=function(e){return e},He.boolean=function(e){return e},He.null=function(e){return e},He),No={};new p(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Br(){for(var e=ge("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var t=n[r];e.get(t).shouldClean()&&e.del(t)}}function Wt(e,r){var n=r.send,t=r.id,o=t===void 0?De():t,i=e.then(function(s){if(be(s))return Je(s).name}),a=e.then(function(s){if(xe(s))throw new Error("Window is closed, can not determine type");return bn(s)?sn.POPUP:sn.IFRAME});return i.catch(fe),a.catch(fe),{id:o,getType:function(){return a},getInstanceID:vo(function(){return e.then(function(s){return St(s,{send:n})})}),close:function(){return e.then(lo)},getName:function(){return e.then(function(s){if(!xe(s))return be(s)?Je(s).name:i})},focus:function(){return e.then(function(s){s.focus()})},isClosed:function(){return e.then(function(s){return xe(s)})},setLocation:function(s){return e.then(function(f){var u=window.location.protocol+"//"+window.location.host;if(s.indexOf("/")===0)s=""+u+s;else if(!s.match(/^https?:\/\//)&&s.indexOf(u)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(s));if(be(f))try{if(f.location&&typeof f.location.replace=="function"){f.location.replace(s);return}}catch{}f.location=s})},setName:function(s){return e.then(function(f){var u=be(f),c=function(d){if(be(d))return Je(d).frameElement;for(var l=0,h=document.querySelectorAll("iframe");l<h.length;l++){var w=h[l];if(w&&w.contentWindow&&w.contentWindow===d)return w}}(f);if(!u)throw new Error("Can not set name for cross-domain window: "+s);Je(f).name=s,c&&c.setAttribute("name",s),i=p.resolve(s)})}}}var Ze=function(){function e(n){var t=n.send,o=n.win,i=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new p,this.serializedWindow=i||Wt(this.actualWindowPromise,{send:t}),ge("idToProxyWindow").set(this.getID(),this),o&&this.setWindow(o,{send:t})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===sn.POPUP})},r.setLocation=function(n){var t=this;return this.serializedWindow.setLocation(n).then(function(){return t})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var t=this;return this.serializedWindow.setName(n).then(function(){return t})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,t=this.isPopup(),o=this.getName(),i=p.hash({isPopup:t,name:o}).then(function(s){var f=s.name;s.isPopup&&f&&window.open("",f)}),a=this.serializedWindow.focus();return p.all([i,a]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,t){var o=t.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=Wt(this.actualWindowPromise,{send:o,id:this.getID()}),Fe("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,t){var o=this,i=t.send;return p.try(function(){return o.actualWindow?n===o.actualWindow:p.hash({proxyInstanceID:o.getInstanceID(),knownWindowInstanceID:St(n,{send:i})}).then(function(a){var s=a.proxyInstanceID===a.knownWindowInstanceID;return s&&o.setWindow(n,{send:i}),s})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&xe(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,t){var o=t.send;return Br(),e.toProxyWindow(n,{send:o}).serialize()},e.deserialize=function(n,t){var o=t.send;return Br(),ge("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:o})},e.isProxyWindow=function(n){return!!(n&&!xn(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,t){var o=t.send;if(Br(),e.isProxyWindow(n))return n;var i=n;return Fe("winToProxyWindow").get(i)||new e({win:i,send:o})},e}();function kr(e,r,n,t,o){var i=Fe("methodStore"),a=ge("proxyWindowMethods");Ze.isProxyWindow(t)?a.set(e,{val:r,name:n,domain:o,source:t}):(a.del(e),i.getOrSet(t,function(){return{}})[e]={domain:o,name:n,val:r,source:t})}function Dt(e,r){var n=Fe("methodStore"),t=ge("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||t.get(r)}function At(e,r,n,t,o){a=(i={on:o.on,send:o.send}).on,s=i.send,ge("builtinListeners").getOrSet("functionCalls",function(){return a("postrobot_method",{domain:"*"},function(c){var d=c.source,l=c.origin,h=c.data,w=h.id,y=h.name,F=Dt(d,w);if(!F)throw new Error("Could not find method '"+y+"' with id: "+h.id+" in "+Y(window));var _=F.source,T=F.domain,$=F.val;return p.try(function(){if(!Qe(T,l))throw new Error("Method '"+h.name+"' domain "+JSON.stringify(fr(F.domain)?F.domain.source:F.domain)+" does not match origin "+l+" in "+Y(window));if(Ze.isProxyWindow(_))return _.matchWindow(d,{send:s}).then(function(z){if(!z)throw new Error("Method call '"+h.name+"' failed - proxy window does not match source in "+Y(window))})}).then(function(){return $.apply({source:d,origin:l},h.args)},function(z){return p.try(function(){if($.onError)return $.onError(z)}).then(function(){throw z.stack&&(z.stack="Remote call to "+y+"("+function(D){return D===void 0&&(D=[]),Ir(D).map(function(j){return typeof j=="string"?"'"+j+"'":j===void 0?"undefined":j===null?"null":typeof j=="boolean"?j.toString():Array.isArray(j)?"[ ... ]":typeof j=="object"?"{ ... }":typeof j=="function"?"() => { ... }":"<"+typeof j+">"}).join(", ")}(h.args)+`) failed

`+z.stack),z})}).then(function(z){return{result:z,id:w,name:y}})})});var i,a,s,f=n.__id__||De();e=Ze.unwrap(e);var u=n.__name__||n.name||t;return typeof u=="string"&&typeof u.indexOf=="function"&&u.indexOf("anonymous::")===0&&(u=u.replace("anonymous::",t+"::")),Ze.isProxyWindow(e)?(kr(f,n,u,e,r),e.awaitWindow().then(function(c){kr(f,n,u,c,r)})):kr(f,n,u,e,r),In("cross_domain_function",{id:f,name:u})}function Tt(e,r,n,t){var o,i=t.on,a=t.send;return function(s,f){f===void 0&&(f=Oo);var u=JSON.stringify(s,function(c){var d=this[c];if(Ur(this))return d;var l=Rt(d);if(!l)return d;var h=f[l]||Co[l];return h?h(d,c):d});return u===void 0?"undefined":u}(n,((o={}).promise=function(s,f){return function(u,c,d,l,h){return In("cross_domain_zalgo_promise",{then:At(u,c,function(w,y){return d.then(w,y)},l,{on:h.on,send:h.send})})}(e,r,s,f,{on:i,send:a})},o.function=function(s,f){return At(e,r,s,f,{on:i,send:a})},o.object=function(s){return xn(s)||Ze.isProxyWindow(s)?In("cross_domain_window",Ze.serialize(s,{send:a})):s},o))}function zt(e,r,n,t){var o,i=t.send;return function(a,s){if(s===void 0&&(s=No),a!=="undefined")return JSON.parse(a,function(f,u){if(Ur(this))return u;var c,d;if(Ur(u)?(c=u.__type__,d=u.__val__):(c=Rt(u),d=u),!c)return d;var l=s[c]||So[c];return l?l(d,f):d})}(n,((o={}).cross_domain_zalgo_promise=function(a){return function(s,f,u){return new p(u.then)}(0,0,a)},o.cross_domain_function=function(a){return function(s,f,u,c){var d=u.id,l=u.name,h=c.send,w=function(F){F===void 0&&(F={});function _(){var T=arguments;return Ze.toProxyWindow(s,{send:h}).awaitWindow().then(function($){var z=Dt($,d);if(z&&z.val!==_)return z.val.apply({source:window,origin:Y()},T);var D=[].slice.call(T);return F.fireAndForget?h($,"postrobot_method",{id:d,name:l,args:D},{domain:f,fireAndForget:!0}):h($,"postrobot_method",{id:d,name:l,args:D},{domain:f,fireAndForget:!1}).then(function(j){return j.data.result})}).catch(function($){throw $})}return _.__name__=l,_.__origin__=f,_.__source__=s,_.__id__=d,_.origin=f,_},y=w();return y.fireAndForget=w({fireAndForget:!0}),y}(e,r,a,{send:i})},o.cross_domain_window=function(a){return Ze.deserialize(a,{send:i})},o))}var wr={};wr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},wr.postrobot_global=function(e,r){if(!function(t){return(t=t||window).navigator.mockUserAgent||t.navigator.userAgent}(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!be(e))throw new Error("Post message through global disabled between different domain windows");if(Qr(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=zn(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:Y(),data:r})};function Hr(e,r,n,t){var o=t.on,i=t.send;return p.try(function(){var a=Fe().getOrSet(e,function(){return{}});return a.buffer=a.buffer||[],a.buffer.push(n),a.flush=a.flush||p.flush().then(function(){if(xe(e))throw new Error("Window is closed");var s=Tt(e,r,((f={}).__post_robot_10_0_42__=a.buffer||[],f),{on:o,send:i}),f;delete a.buffer;for(var u=Object.keys(wr),c=[],d=0;d<u.length;d++){var l=u[d];try{wr[l](e,s,r)}catch(h){c.push(h)}}if(c.length===u.length)throw new Error(`All post-robot messaging strategies failed:

`+c.map(function(h,w){return w+". "+Cn(h)}).join(`

`))}),a.flush.then(function(){delete a.flush})}).then(fe)}function It(e){return ge("responseListeners").get(e)}function Ft(e){ge("responseListeners").del(e)}function jt(e){return ge("erroredResponseListeners").has(e)}function Lt(e){var r=e.name,n=e.win,t=e.domain,o=Fe("requestListeners");if(n==="*"&&(n=null),t==="*"&&(t=null),!r)throw new Error("Name required to get request listener");for(var i=0,a=[n,mr()];i<a.length;i++){var s=a[i];if(s){var f=o.get(s);if(f){var u=f[r];if(u){if(t&&typeof t=="string"){if(u[t])return u[t];if(u.__domain_regex__)for(var c=0,d=u.__domain_regex__;c<d.length;c++){var l=d[c],h=l.listener;if(Qe(l.regex,t))return h}}if(u["*"])return u["*"]}}}}}function Ro(e,r,n,t){var o=t.on,i=t.send,a=Lt({name:n.name,win:e,domain:r}),s=n.name==="postrobot_method"&&n.data&&typeof n.data.name=="string"?n.data.name+"()":n.name;function f(u,c,d){return p.flush().then(function(){if(!n.fireAndForget&&!xe(e))try{return Hr(e,r,{id:De(),origin:Y(window),type:"postrobot_message_response",hash:n.hash,name:n.name,ack:u,data:c,error:d},{on:o,send:i})}catch(l){throw new Error("Send response message failed for "+s+" in "+Y()+`

`+Cn(l))}})}return p.all([p.flush().then(function(){if(!n.fireAndForget&&!xe(e))try{return Hr(e,r,{id:De(),origin:Y(window),type:"postrobot_message_ack",hash:n.hash,name:n.name},{on:o,send:i})}catch(u){throw new Error("Send ack message failed for "+s+" in "+Y()+`

`+Cn(u))}}),p.try(function(){if(!a)throw new Error("No handler found for post message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Qe(a.domain,r))throw new Error("Request origin "+r+" does not match domain "+a.domain.toString());return a.handler({source:e,origin:r,data:n.data})}).then(function(u){return f("success",u)},function(u){return f("error",null,u)})]).then(fe).catch(function(u){if(a&&a.handleError)return a.handleError(u);throw u})}function Wo(e,r,n){if(!jt(n.hash)){var t=It(n.hash);if(!t)throw new Error("No handler found for post message ack for message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!Qe(t.domain,r))throw new Error("Ack origin "+r+" does not match domain "+t.domain.toString());if(e!==t.win)throw new Error("Ack source does not match registered window")}catch(o){t.promise.reject(o)}t.ack=!0}}function Do(e,r,n){if(!jt(n.hash)){var t=It(n.hash);if(!t)throw new Error("No handler found for post message response for message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Qe(t.domain,r))throw new Error("Response origin "+r+" does not match domain "+(o=t.domain,Array.isArray(o)?"("+o.join(" | ")+")":En(o)?"RegExp("+o.toString():o.toString()));var o;if(e!==t.win)throw new Error("Response source does not match registered window");Ft(n.hash),n.ack==="error"?t.promise.reject(n.error):n.ack==="success"&&t.promise.resolve({source:e,origin:r,data:n.data})}}function Mt(e,r){var n=r.on,t=r.send,o=ge("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var i=e.source,a=e.origin,s=function(c,d,l,h){var w=h.on,y=h.send,F;try{F=zt(d,l,c,{on:w,send:y})}catch{return}if(F&&typeof F=="object"&&F!==null){var _=F.__post_robot_10_0_42__;if(Array.isArray(_))return _}}(e.data,i,a,{on:n,send:t});if(s){Nt(i);for(var f=0;f<s.length;f++){var u=s[f];if(o.has(u.id)||(o.set(u.id,!0),xe(i)&&!u.fireAndForget))return;u.origin.indexOf("file:")===0&&(a="file://");try{u.type==="postrobot_message_request"?Ro(i,a,u,{on:n,send:t}):u.type==="postrobot_message_response"?Do(i,a,u):u.type==="postrobot_message_ack"&&Wo(i,a,u)}catch(c){setTimeout(function(){throw c},0)}}}}function Sn(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");(r=r||{}).name=e,r.handler=n||r.handler;var t=r.window,o=r.domain,i=function a(s,f){var u=s.name,c=s.win,d=s.domain,l=Fe("requestListeners");if(!u||typeof u!="string")throw new Error("Name required to add request listener");if(Array.isArray(c)){for(var h=[],w=0,y=c;w<y.length;w++)h.push(a({name:u,domain:d,win:y[w]},f));return{cancel:function(){for(var te=0;te<h.length;te++)h[te].cancel()}}}if(Array.isArray(d)){for(var F=[],_=0,T=d;_<T.length;_++)F.push(a({name:u,win:c,domain:T[_]},f));return{cancel:function(){for(var te=0;te<F.length;te++)F[te].cancel()}}}var $=Lt({name:u,win:c,domain:d});if(c&&c!=="*"||(c=mr()),d=d||"*",$)throw c&&d?new Error("Request listener already exists for "+u+" on domain "+d.toString()+" for "+(c===mr()?"wildcard":"specified")+" window"):c?new Error("Request listener already exists for "+u+" for "+(c===mr()?"wildcard":"specified")+" window"):d?new Error("Request listener already exists for "+u+" on domain "+d.toString()):new Error("Request listener already exists for "+u);var z=l.getOrSet(c,function(){return{}}),D=kn(z,u,function(){return{}}),j=d.toString(),ee,Ae;return fr(d)?(ee=kn(D,"__domain_regex__",function(){return[]})).push(Ae={regex:d,listener:f}):D[j]=f,{cancel:function(){delete D[j],Ae&&(ee.splice(ee.indexOf(Ae,1)),ee.length||delete D.__domain_regex__),Object.keys(D).length||delete z[u],c&&!Object.keys(z).length&&l.del(c)}}}({name:e,win:t,domain:o},{handler:r.handler,handleError:r.errorHandler||function(a){throw a},window:t,domain:o||"*",name:e});return{cancel:function(){i.cancel()}}}var en=function e(r,n,t,o){var i=(o=o||{}).domain||"*",a=o.timeout||-1,s=o.timeout||5e3,f=o.fireAndForget||!1;return p.try(function(){if(function(u,c,d){if(!u)throw new Error("Expected name");if(typeof d!="string"&&!Array.isArray(d)&&!fr(d))throw new TypeError("Can not send "+u+". Expected domain "+JSON.stringify(d)+" to be a string, array, or regex");if(xe(c))throw new Error("Can not send "+u+". Target window is closed")}(n,r,i),function(u,c){var d=Nr(c);if(d)return d===u;if(c===u||ir(c)===c)return!1;for(var l=0,h=Kr(u);l<h.length;l++)if(h[l]===c)return!0;return!1}(window,r))return function(u,c,d){c===void 0&&(c=5e3),d===void 0&&(d="Window");var l=function(h){return Fe("helloPromises").getOrSet(h,function(){return new p})}(u);return c!==-1&&(l=l.timeout(c,new Error(d+" did not load after "+c+"ms"))),l}(r,s)}).then(function(u){return function(c,d,l,h){var w=h.send;return p.try(function(){return typeof d=="string"?d:p.try(function(){return l||$r(c,{send:w}).then(function(y){return y.domain})}).then(function(y){if(!Qe(d,d))throw new Error("Domain "+zr(d)+" does not match "+zr(d));return y})})}(r,i,(u===void 0?{}:u).domain,{send:e})}).then(function(u){var c=u,d=n==="postrobot_method"&&t&&typeof t.name=="string"?t.name+"()":n,l=new p,h=n+"_"+De();if(!f){var w={name:n,win:r,domain:c,promise:l};(function(D,j){ge("responseListeners").set(D,j)})(h,w);var y=Fe("requestPromises").getOrSet(r,function(){return[]});y.push(l),l.catch(function(){(function(D){ge("erroredResponseListeners").set(D,!0)})(h),Ft(h)});var F=function(D){return Fe("knownWindows").get(D,!1)}(r)?1e4:2e3,_=a,T=F,$=_,z=Bn(function(){return xe(r)?l.reject(new Error("Window closed for "+n+" before "+(w.ack?"response":"ack"))):w.cancelled?l.reject(new Error("Response listener was cancelled for "+n)):(T=Math.max(T-500,0),$!==-1&&($=Math.max($-500,0)),w.ack||T!==0?$===0?l.reject(new Error("No response for postMessage "+d+" in "+Y()+" in "+_+"ms")):void 0:l.reject(new Error("No ack for postMessage "+d+" in "+Y()+" in "+F+"ms")))},500);l.finally(function(){z.cancel(),y.splice(y.indexOf(l,1))}).catch(fe)}return Hr(r,c,{id:De(),origin:Y(window),type:"postrobot_message_request",hash:h,name:n,data:t,fireAndForget:f},{on:Sn,send:e}).then(function(){return f?l.resolve():l},function(D){throw new Error("Send request message failed for "+d+" in "+Y()+`

`+Cn(D))})})};function _t(e,r,n){return Tt(e,r,n,{on:Sn,send:en})}function qt(e,r,n){return zt(e,r,n,{send:en})}function gr(e){return Ze.toProxyWindow(e,{send:en})}function Gn(e){if(e===void 0&&(e=window),!be(e))throw new Error("Can not get global for window on different domain");return e.__zoid_9_0_63__||(e.__zoid_9_0_63__={}),e.__zoid_9_0_63__}function yr(e){return{get:function(){var r=this;return p.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}var Ao={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Er={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},Pe=sn,se={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function $t(e,r,n,t,o){if(!e.hasOwnProperty(n))return t;var i=e[n];return typeof i.childDecorate=="function"?i.childDecorate({value:t,uid:o.uid,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide}):t}function Ut(e){return st(Ut,function(){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],t=r[2],o=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!t)throw new Error("Expected component name");if(!o)throw new Error("Expected encoded payload");try{return JSON.parse(function(i){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(i),function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(i,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(o))}catch(i){throw new Error("Can not decode window name payload: "+o+": "+Cn(i))}},[e])}function Bt(){try{return Ut(window.name)}catch{}}function To(){return p.try(function(){window.focus()})}function kt(){return p.try(function(){window.close()})}function zo(e,r,n){return p.try(function(){return typeof e.queryParam=="function"?e.queryParam({value:n}):typeof e.queryParam=="string"?e.queryParam:r})}function Io(e,r,n){return p.try(function(){return typeof e.queryValue=="function"&&On(n)?e.queryValue({value:n}):n})}function Ht(e,r,n){r===void 0&&(r={}),n===void 0&&(n=window);var t=e.propsDef,o=e.containerTemplate,i=e.prerenderTemplate,a=e.tag,s=e.name,f=e.attributes,u=e.dimensions,c=e.autoResize,d=e.url,l=e.domain,h=new p,w=[],y=lr(),F={},_={visible:!0},T=r.event?r.event:($={},z={},{on:function(v,E){var P=z[v]=z[v]||[];P.push(E);var N=!1;return{cancel:function(){N||(N=!0,P.splice(P.indexOf(E),1))}}},once:function(v,E){var P=this.on(v,function(){P.cancel(),E()});return P},trigger:function(v){for(var E=arguments.length,P=new Array(E>1?E-1:0),N=1;N<E;N++)P[N-1]=arguments[N];var A=z[v],G=[];if(A)for(var ne=function(he){var re=A[he];G.push(p.try(function(){return re.apply(void 0,P)}))},ie=0;ie<A.length;ie++)ne(ie);return p.all(G).then(fe)},triggerOnce:function(v){if($[v])return p.resolve();$[v]=!0;for(var E=arguments.length,P=new Array(E>1?E-1:0),N=1;N<E;N++)P[N-1]=arguments[N];return this.trigger.apply(this,[v].concat(P))},reset:function(){z={}}}),$,z,D=r.props?r.props:{},j,ee,Ae,te=r.onError,ye=r.getProxyContainer,J=r.show,cn=r.hide,Nn=r.close,dn=r.renderContainer,fn=r.getProxyWindow,Rn=r.setProxyWin,Wn=r.openFrame,ln=r.openPrerenderFrame,tn=r.prerender,hn=r.open,pn=r.openPrerender,H=r.watchForUnload,pe=r.getInternalState,le=r.setInternalState,Ce=function(v){for(var E={},P=0,N=Object.keys(D);P<N.length;P++){var A=N[P],G=t[A];G&&G.sendToChild===!1||G&&G.sameDomain&&!Qe(v,Y(window))||(E[A]=D[A])}return p.hash(E)},ve=function(){return p.try(function(){return pe?pe():_})},ue=function(v){return p.try(function(){return le?le(v):_=x({},_,v)})},U=function(){return fn?fn():p.try(function(){var v=D.window;if(v){var E=gr(v);return y.register(function(){return v.close()}),E}return new Ze({send:en})})},ce=function(v){return ye?ye(v):p.try(function(){return vt(v)}).then(function(E){return qr(E)&&(E=function(P){var N=function(ie){var he=function(re){for(;re.parentNode;)re=re.parentNode;if(qr(re))return re}(ie);if(he.host)return he.host}(P);if(!N)throw new Error("Element is not in shadow dom");if(qr(N))throw new Error("Host element is also in shadow dom");var A="shadow-slot-"+De(),G=document.createElement("slot");G.setAttribute("name",A),P.appendChild(G);var ne=document.createElement("div");return ne.setAttribute("slot",A),N.appendChild(ne),ne}(E)),yr(E)})},nn=function(v){return Rn?Rn(v):p.try(function(){j=v})},qe=function(){return J?J():p.hash({setState:ue({visible:!0}),showElement:ee?ee.get().then(Eo):null}).then(fe)},on=function(){return cn?cn():p.hash({setState:ue({visible:!1}),showElement:ee?ee.get().then(yt):null}).then(fe)},Ge=function(){return typeof d=="function"?d({props:D}):d},Ke=function(){return typeof f=="function"?f({props:D}):f},vn=function(){return l&&typeof l=="string"?l:et(Ge())},Dn=function(){return l&&fr(l)?l:vn()},an=function(v,E){var P=E.windowName;return Wn?Wn(v,{windowName:P}):p.try(function(){if(v===Pe.IFRAME)return yr(wt({attributes:x({name:P,title:s},Ke().iframe)}))})},Vn=function(v){return ln?ln(v):p.try(function(){if(v===Pe.IFRAME)return yr(wt({attributes:x({name:"__zoid_prerender_frame__"+s+"_"+De()+"__",title:"prerender__"+s},Ke().iframe)}))})},Fn=function(v,E,P){return pn?pn(v,E,P):p.try(function(){if(v===Pe.IFRAME){if(!P)throw new Error("Expected proxy frame to be passed");return P.get().then(function(N){return y.register(function(){return Hn(N)}),Mr(N).then(function(A){return Je(A)}).then(function(A){return gr(A)})})}throw new Error("No render context available for "+v)})},Jn=function(){return p.try(function(){if(j)return p.all([T.trigger(se.FOCUS),j.focus()]).then(fe)})},Zn=function(v,E,P,N){if(E===Y(window)){var A=Gn(window);return A.windows=A.windows||{},A.windows[P]=window,y.register(function(){delete A.windows[P]}),{type:"global",uid:P}}return N===Pe.POPUP?{type:"opener"}:{type:"parent",distance:Xr(window)}},Vt=function(v){return p.try(function(){Ae=v,h.resolve(),y.register(function(){return v.close.fireAndForget().catch(fe)})})},Vr=function(v){var E=v.width,P=v.height;return p.try(function(){T.trigger(se.RESIZE,{width:E,height:P})})},Kn=function(v){return p.try(function(){return T.trigger(se.DESTROY)}).catch(fe).then(function(){return y.all(v)}).then(function(){h.asyncReject(v||new Error("Component destroyed"))})},mn=Pn(function(v){return p.try(function(){return Nn?xe(Nn.__source__)?void 0:Nn():p.try(function(){return T.trigger(se.CLOSE)}).then(function(){return Kn(v||new Error("Component closed"))})})}),Jt=function(v,E){var P=E.proxyWin,N=E.proxyFrame;return hn?hn(v,{proxyWin:P,proxyFrame:N,windowName:E.windowName}):p.try(function(){if(v===Pe.IFRAME){if(!N)throw new Error("Expected proxy frame to be passed");return N.get().then(function(A){return Mr(A).then(function(G){return y.register(function(){return Hn(A)}),y.register(function(){return function(ne){for(var ie=0,he=Fe("requestPromises").get(ne,[]);ie<he.length;ie++)he[ie].reject(new Error("Window "+(xe(ne)?"closed":"cleaned up")+" before response")).catch(fe)}(G)}),G})})}throw new Error("No render context available for "+v)}).then(function(A){return P.setWindow(A,{send:en}),P})},Zt=function(){return p.try(function(){var v=gt(window,"unload",cr(function(){Kn(new Error("Window navigated away"))})),E=nt(n,Kn,3e3);if(y.register(E.cancel),y.register(v.cancel),H)return H()})},Kt=function(v){var E=!1;return v.isClosed().then(function(P){return P?(E=!0,mn(new Error("Detected component window close"))):p.delay(200).then(function(){return v.isClosed()}).then(function(N){if(N)return E=!0,mn(new Error("Detected component window close"))})}).then(function(){return E})},Xn=function(v){return te?te(v):p.try(function(){if(w.indexOf(v)===-1)return w.push(v),h.asyncReject(v),T.trigger(se.ERROR,v)})};Vt.onError=Xn;var Xt=function(v,E){return v({container:E.container,context:E.context,uid:E.uid,doc:E.doc,frame:E.frame,prerenderFrame:E.prerenderFrame,focus:Jn,close:mn,state:F,props:D,tag:a,dimensions:u,event:T})},Qt=function(v,E){var P=E.context,N=E.uid;return tn?tn(v,{context:P,uid:N}):p.try(function(){if(i){var A=v.getWindow();if(A&&be(A)&&function(me){try{if(!me.location.href||me.location.href==="about:blank")return!0}catch{}return!1}(A)){var G=(A=Je(A)).document,ne=Xt(i,{context:P,uid:N,doc:G});if(ne){if(ne.ownerDocument!==G)throw new Error("Expected prerender template to have been created with document from child window");(function(me,Te){var Oe=Te.tagName.toLowerCase();if(Oe!=="html")throw new Error("Expected element to be html, got "+Oe);for(var we=me.document.documentElement,Me=0,Se=Ir(we.children);Me<Se.length;Me++)we.removeChild(Se[Me]);for(var ae=0,Ee=Ir(Te.children);ae<Ee.length;ae++)we.appendChild(Ee[ae])})(A,ne);var ie=c.width,he=ie!==void 0&&ie,re=c.height,rn=re!==void 0&&re,je=c.element,Le=je===void 0?"body":je;if((Le=Lr(Le,G))&&(he||rn)){var $e=Et(Le,function(me){Vr({width:he?me.width:void 0,height:rn?me.height:void 0})},{width:he,height:rn,win:A});T.on(se.RENDERED,$e.cancel)}}}}})},eo=function(v,E){var P=E.proxyFrame,N=E.proxyPrerenderFrame,A=E.context,G=E.uid;return dn?dn(v,{proxyFrame:P,proxyPrerenderFrame:N,context:A,uid:G}):p.hash({container:v.get(),frame:P?P.get():null,prerenderFrame:N?N.get():null,internalState:ve()}).then(function(ne){var ie=ne.container,he=ne.internalState.visible,re=Xt(o,{context:A,uid:G,container:ie,frame:ne.frame,prerenderFrame:ne.prerenderFrame,doc:document});if(re){he||yt(re),go(ie,re);var rn=function(je,Le){Le=cr(Le);var $e=!1,me=[],Te,Oe,we,Me=function(){$e=!0;for(var Ue=0;Ue<me.length;Ue++)me[Ue].disconnect();Te&&Te.cancel(),we&&we.removeEventListener("unload",Se),Oe&&Hn(Oe)},Se=function(){$e||(Le(),Me())};if(_r(je))return Se(),{cancel:Me};if(window.MutationObserver)for(var ae=je.parentElement;ae;){var Ee=new window.MutationObserver(function(){_r(je)&&Se()});Ee.observe(ae,{childList:!0}),me.push(Ee),ae=ae.parentElement}return(Oe=document.createElement("iframe")).setAttribute("name","__detect_close_"+De()+"__"),Oe.style.display="none",Mr(Oe).then(function(Ue){(we=Je(Ue)).addEventListener("unload",Se)}),je.appendChild(Oe),Te=Bn(function(){_r(je)&&Se()},1e3),{cancel:Me}}(re,function(){return mn(new Error("Detected container element removed from DOM"))});return y.register(function(){return rn.cancel()}),y.register(function(){return Hn(re)}),ee=yr(re)}})},no=function(){return{state:F,event:T,close:mn,focus:Jn,resize:Vr,onError:Xn,updateProps:ko,show:qe,hide:on}},ro=function(v,E){E===void 0&&(E=!1);var P=no();(function(N,A,G,ne,ie){ie===void 0&&(ie=!1),Un(A,G=G||{});for(var he=ie?[]:[].concat(Object.keys(N)),re=0,rn=Object.keys(G);re<rn.length;re++){var je=rn[re];he.indexOf(je)===-1&&he.push(je)}for(var Le=[],$e=ne.state,me=ne.close,Te=ne.focus,Oe=ne.event,we=ne.onError,Me=0;Me<he.length;Me++){var Se=he[Me],ae=N[Se],Ee=G[Se];if(ae){var Ue=ae.alias;if(Ue&&(!On(Ee)&&On(G[Ue])&&(Ee=G[Ue]),Le.push(Ue)),ae.value&&(Ee=ae.value({props:A,state:$e,close:me,focus:Te,event:Oe,onError:we})),!On(Ee)&&ae.default&&(Ee=ae.default({props:A,state:$e,close:me,focus:Te,event:Oe,onError:we})),On(Ee)&&(ae.type==="array"?!Array.isArray(Ee):typeof Ee!==ae.type))throw new TypeError("Prop is not of type "+ae.type+": "+Se);A[Se]=Ee}}for(var Qn=0;Qn<Le.length;Qn++)delete A[Le[Qn]];for(var er=0,br=Object.keys(A);er<br.length;er++){var nr=br[er],rr=N[nr],I=A[nr];rr&&On(I)&&rr.decorate&&(A[nr]=rr.decorate({value:I,props:A,state:$e,close:me,focus:Te,event:Oe,onError:we}))}for(var V=0,Z=Object.keys(N);V<Z.length;V++){var oe=Z[V];if(N[oe].required!==!1&&!On(A[oe]))throw new Error('Expected prop "'+oe+'" to be defined')}})(t,D,v,P,E)},ko=function(v){return ro(v,!0),h.then(function(){var E=Ae,P=j;if(E&&P)return Ce(Dn()).then(function(N){return E.updateProps(N).catch(function(A){return Kt(P).then(function(G){if(!G)throw A})})})})};return{init:function(){(function(){T.on(se.RENDER,function(){return D.onRender()}),T.on(se.DISPLAY,function(){return D.onDisplay()}),T.on(se.RENDERED,function(){return D.onRendered()}),T.on(se.CLOSE,function(){return D.onClose()}),T.on(se.DESTROY,function(){return D.onDestroy()}),T.on(se.RESIZE,function(){return D.onResize()}),T.on(se.FOCUS,function(){return D.onFocus()}),T.on(se.PROPS,function(v){return D.onProps(v)}),T.on(se.ERROR,function(v){return D&&D.onError?D.onError(v):h.reject(v).then(function(){setTimeout(function(){throw v},1)})}),y.register(T.reset)})()},render:function(v,E,P){return p.try(function(){var N="zoid-"+a+"-"+De(),A=Dn(),G=vn();(function(I,V,Z){if(I!==window){if(!Qr(window,I))throw new Error("Can only renderTo an adjacent frame");var oe=Y();if(!Qe(V,oe)&&!be(I))throw new Error("Can not render remotely to "+V.toString()+" - can only render to "+oe);if(Z&&typeof Z!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Z+" }")}})(v,A,E);var ne=p.try(function(){if(v!==window)return function(I,V){for(var Z={},oe=0,Ne=Object.keys(D);oe<Ne.length;oe++){var K=Ne[oe],ze=t[K];ze&&ze.allowDelegate&&(Z[K]=D[K])}var de=en(V,"zoid_delegate_"+s,{overrides:{props:Z,event:T,close:mn,onError:Xn,getInternalState:ve,setInternalState:ue}}).then(function(L){var R=L.data.parent;return y.register(function(g){if(!xe(V))return R.destroy(g)}),R.getDelegateOverrides()}).catch(function(L){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Cn(L))});return ye=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.getProxyContainer.apply(B,R)})},dn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.renderContainer.apply(B,R)})},J=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.show.apply(B,R)})},cn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.hide.apply(B,R)})},H=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.watchForUnload.apply(B,R)})},I===Pe.IFRAME&&(fn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.getProxyWindow.apply(B,R)})},Wn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.openFrame.apply(B,R)})},ln=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.openPrerenderFrame.apply(B,R)})},tn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.prerender.apply(B,R)})},hn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.open.apply(B,R)})},pn=function(){for(var L=arguments.length,R=new Array(L),g=0;g<L;g++)R[g]=arguments[g];return de.then(function(B){return B.openPrerender.apply(B,R)})}),de}(P,v)}),ie=D.window,he=Zt(),re=function(I,V){var Z={},oe=Object.keys(V);return p.all(oe.map(function(Ne){var K=I[Ne];if(K)return p.resolve().then(function(){var ze=V[Ne];if(ze&&K.queryParam)return ze}).then(function(ze){if(ze!=null)return p.all([zo(K,Ne,ze),Io(K,0,ze)]).then(function(de){var L=de[0],R=de[1],g;if(typeof R=="boolean")g=R.toString();else if(typeof R=="string")g=R.toString();else if(typeof R=="object"&&R!==null){if(K.serialization===Er.JSON)g=JSON.stringify(R);else if(K.serialization===Er.BASE64)g=btoa(JSON.stringify(R));else if(K.serialization===Er.DOTIFY||!K.serialization){g=function Pr(Re,_e,An){_e===void 0&&(_e=""),An===void 0&&(An={}),_e=_e&&_e+".";for(var Ie in Re)Re.hasOwnProperty(Ie)&&Re[Ie]!=null&&typeof Re[Ie]!="function"&&(Re[Ie]&&Array.isArray(Re[Ie])&&Re[Ie].length&&Re[Ie].every(function(Ho){return typeof Ho!="object"})?An[""+_e+Ie+"[]"]=Re[Ie].join(","):Re[Ie]&&typeof Re[Ie]=="object"?An=Pr(Re[Ie],""+_e+Ie,An):An[""+_e+Ie]=Re[Ie].toString());return An}(R,Ne);for(var B=0,jn=Object.keys(g);B<jn.length;B++){var xr=jn[B];Z[xr]=g[xr]}return}}else typeof R=="number"&&(g=R.toString());Z[L]=g})})})).then(function(){return Z})}(t,D).then(function(I){return function(V,Z){var oe=Z.query||{},Ne=Z.hash||{},K,ze,de=V.split("#");ze=de[1];var L=(K=de[0]).split("?");K=L[0];var R=ht(L[1],oe),g=ht(ze,Ne);return R&&(K=K+"?"+R),g&&(K=K+"#"+g),K}(function(V){if(Z=et(V),Z.indexOf("mock:")!==0)return V;var Z;throw new Error("Mock urls not supported out of test mode")}(Ge()),{query:I})}),rn=T.trigger(se.RENDER),je=ce(E),Le=U(),$e=Le.then(function(I){return function(Z){var oe=Z===void 0?{}:Z,Ne=oe.proxyWin,K=oe.childDomain,ze=oe.domain,de=oe.context,L=oe.uid;return function(R,g,B,jn){return Ce(B).then(function(xr){var Pr=_t(R,B,xr),Re=g===Y()?{type:"uid",uid:jn}:{type:"raw",value:Pr};if(Re.type==="uid"){var _e=Gn(window);_e.props=_e.props||{},_e.props[jn]=Pr,y.register(function(){delete _e.props[jn]})}return Re})}(Ne,K,ze,L).then(function(R){return{uid:L,context:de,tag:a,version:"9_0_63",childDomain:K,parentDomain:Y(window),parent:Zn(0,K,L,de),props:R,exports:_t(Ne,ze,(g=Ne,{init:Vt,close:mn,checkClose:function(){return Kt(g)},resize:Vr,onError:Xn,show:qe,hide:on}))};var g})}({proxyWin:(V={proxyWin:I,childDomain:G,domain:A,target:v,context:P,uid:N}).proxyWin,childDomain:V.childDomain,domain:V.domain,target:V.target,context:V.context,uid:V.uid}).then(function(Z){return"__zoid__"+s+"__"+it(JSON.stringify(Z))+"__"});var V}),me=$e.then(function(I){return an(P,{windowName:I})}),Te=Vn(P),Oe=p.hash({proxyContainer:je,proxyFrame:me,proxyPrerenderFrame:Te}).then(function(I){return eo(I.proxyContainer,{context:P,uid:N,proxyFrame:I.proxyFrame,proxyPrerenderFrame:I.proxyPrerenderFrame})}).then(function(I){return I}),we=p.hash({windowName:$e,proxyFrame:me,proxyWin:Le}).then(function(I){var V=I.proxyWin;return ie?V:Jt(P,{windowName:I.windowName,proxyWin:V,proxyFrame:I.proxyFrame})}),Me=p.hash({proxyWin:we,proxyPrerenderFrame:Te}).then(function(I){return Fn(P,I.proxyWin,I.proxyPrerenderFrame)}),Se=we.then(function(I){return j=I,nn(I)}),ae=p.hash({proxyPrerenderWin:Me,state:Se}).then(function(I){return Qt(I.proxyPrerenderWin,{context:P,uid:N})}),Ee=p.hash({proxyWin:we,windowName:$e}).then(function(I){if(ie)return I.proxyWin.setName(I.windowName)}),Ue=p.hash({proxyWin:we,builtUrl:re,windowName:Ee,prerender:ae}).then(function(I){return I.proxyWin.setLocation(I.builtUrl)}),Qn=we.then(function(I){(function V(Z,oe){var Ne=!1;return y.register(function(){Ne=!0}),p.delay(2e3).then(function(){return Z.isClosed()}).then(function(K){return K?mn(new Error("Detected "+oe+" close")):Ne?void 0:V(Z,oe)})})(I,P)}),er=p.hash({container:Oe,prerender:ae}).then(function(){return T.trigger(se.DISPLAY)}),br=we.then(function(I){}),nr=Ue.then(function(){return p.try(function(){var I=D.timeout;if(I)return h.timeout(I,new Error("Loading component timed out after "+I+" milliseconds"))})}),rr=h.then(function(){return T.trigger(se.RENDERED)});return p.hash({initPromise:h,buildUrlPromise:re,onRenderPromise:rn,getProxyContainerPromise:je,openFramePromise:me,openPrerenderFramePromise:Te,renderContainerPromise:Oe,openPromise:we,openPrerenderPromise:Me,setStatePromise:Se,prerenderPromise:ae,loadUrlPromise:Ue,buildWindowNamePromise:$e,setWindowNamePromise:Ee,watchForClosePromise:Qn,onDisplayPromise:er,openBridgePromise:br,runTimeoutPromise:nr,onRenderedPromise:rr,delegatePromise:ne,watchForUnloadPromise:he})}).catch(function(N){return p.all([Xn(N),Kn(N)]).then(function(){throw N},function(){throw N})}).then(fe)},destroy:Kn,setProps:ro,getHelpers:no,getDelegateOverrides:function(){return p.try(function(){return{getProxyContainer:ce,show:qe,hide:on,renderContainer:eo,getProxyWindow:U,watchForUnload:Zt,openFrame:an,openPrerenderFrame:Vn,prerender:Qt,open:Jt,openPrerender:Fn,setProxyWin:nn}})}}}var Fo={register:function(e,r,n,t){var o=t.React,i=t.ReactDOM;return function(a){b(s,a);function s(){return a.apply(this,arguments)||this}var f=s.prototype;return f.render=function(){return o.createElement("div",null)},f.componentDidMount=function(){var u=i.findDOMNode(this),c=n(Un({},this.props));c.render(u,Pe.IFRAME),this.setState({parent:c})},f.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Un({},this.props)).catch(fe)},s}(o.Component)}},jo={register:function(e,r,n,t){return t.component(e,{render:function(o){return o("div")},inheritAttrs:!1,mounted:function(){var o=this.$el;this.parent=n(x({},this.$attrs)),this.parent.render(o,Pe.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(x({},this.$attrs)).catch(fe)},deep:!0}}})}},Lo={register:function(e,r,n,t){return t.module(e,[]).directive(e.replace(/-([a-z])/g,function(o){return o[1].toUpperCase()}),function(){for(var o={},i=0,a=Object.keys(r);i<a.length;i++)o[a[i]]="=";return o.props="=",{scope:o,restrict:"E",controller:["$scope","$element",function(s,f){function u(){if(s.$root.$$phase!=="$apply"&&s.$root.$$phase!=="$digest")try{s.$apply()}catch{}}var c=function(){return dr(s.props,function(l){return typeof l=="function"?function(){var h=l.apply(this,arguments);return u(),h}:l})},d=n(c());d.render(f[0],Pe.IFRAME),s.$watch(function(){d.updateProps(c()).catch(fe)})}]}})}},Mo={register:function(e,r,n,t){var o=t.NgModule,i=t.ElementRef,a=t.NgZone,s=function(u){return dr(x({},u.internalProps,u.props),function(c){return typeof c=="function"?function(){var d=arguments,l=this;return u.zone.run(function(){return c.apply(l,d)})}:c})},f=(0,t.Component)({selector:e,template:"<div></div>",inputs:["props"]}).Class({constructor:[i,a,function(u,c){this._props={},this.elementRef=u,this.zone=c}],ngOnInit:function(){var u=this.elementRef.nativeElement;this.parent=n(s(this)),this.parent.render(u,Pe.IFRAME)},ngDoCheck:function(){this.parent&&!function(u,c){var d={};for(var l in u)if(u.hasOwnProperty(l)&&(d[l]=!0,u[l]!==c[l]))return!1;for(var h in c)if(!d[h])return!1;return!0}(this._props,this.props)&&(this._props=x({},this.props),this.parent.updateProps(s(this)))}});return o({declarations:[f],exports:[f]}).Class({constructor:function(){}})}};function _o(e){var r=e.uid,n=e.frame,t=e.prerenderFrame,o=e.doc,i=e.props,a=e.event,s=e.dimensions,f=s.width,u=s.height;if(n&&t){var c=o.createElement("div");c.setAttribute("id",r);var d=o.createElement("style");return i.cspNonce&&d.setAttribute("nonce",i.cspNonce),d.appendChild(o.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+f+`;
                height: `+u+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),c.appendChild(n),c.appendChild(t),c.appendChild(d),t.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),a.on(se.RENDERED,function(){t.classList.remove("zoid-visible"),t.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){Hn(t)},1)}),a.on(se.RESIZE,function(l){var h=l.width,w=l.height;typeof h=="number"&&(c.style.width=xt(h)),typeof w=="number"&&(c.style.height=xt(w))}),c}}function qo(e){var r=e.doc,n=e.props,t=r.createElement("html"),o=r.createElement("body"),i=r.createElement("style"),a=r.createElement("div");return a.classList.add("spinner"),n.cspNonce&&i.setAttribute("nonce",n.cspNonce),t.appendChild(o),o.appendChild(a),o.appendChild(i),i.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),t}var un=function(){return fe},Yn=function(e){return cr(e.value)},Gr=lr(),Yr=lr();function $o(e){var r=function(h){var w=h.tag,y=h.url,F=h.domain,_=h.bridgeUrl,T=h.props,$=T===void 0?{}:T,z=h.dimensions,D=z===void 0?{}:z,j=h.autoResize,ee=j===void 0?{}:j,Ae=h.allowedParentDomains,te=Ae===void 0?"*":Ae,ye=h.attributes,J=ye===void 0?{}:ye,cn=h.defaultContext,Nn=cn===void 0?Pe.IFRAME:cn,dn=h.containerTemplate,fn=dn===void 0?_o:dn,Rn=h.prerenderTemplate,Wn=Rn===void 0?qo:Rn,ln=h.validate,tn=h.eligible,hn=tn===void 0?function(){return{eligible:!0}}:tn,pn=h.logger,H=pn===void 0?{info:fe}:pn,pe=w.replace(/-/g,"_"),le=D.width,Ce=le===void 0?"300px":le,ve=D.height,ue=ve===void 0?"150px":ve;if($=x({},{window:{type:"object",sendToChild:!1,required:!1,allowDelegate:!0,validate:function(U){var ce=U.value;if(!xn(ce)&&!Ze.isProxyWindow(ce))throw new Error("Expected Window or ProxyWindow");if(xn(ce)){if(xe(ce))throw new Error("Window is closed");if(!be(ce))throw new Error("Window is not same domain")}},decorate:function(U){return gr(U.value)}},timeout:{type:"number",required:!1,sendToChild:!1},close:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.close}},focus:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.focus}},resize:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.resize}},uid:{type:"string",required:!1,sendToChild:!1,childDecorate:function(U){return U.uid}},cspNonce:{type:"string",required:!1},getParent:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.getParent}},getParentDomain:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.getParentDomain}},show:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.show}},hide:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.hide}},onDisplay:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:un,decorate:Yn},onRendered:{type:"function",required:!1,sendToChild:!1,default:un,decorate:Yn},onRender:{type:"function",required:!1,sendToChild:!1,default:un,decorate:Yn},onClose:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:un,decorate:Yn},onDestroy:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:un,decorate:Yn},onResize:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:un},onFocus:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:un},onError:{type:"function",required:!1,sendToChild:!1,childDecorate:function(U){return U.onError}},onProps:{type:"function",required:!1,sendToChild:!1,default:un,childDecorate:function(U){return U.onProps}}},$),!fn)throw new Error("Container template required");return{name:pe,tag:w,url:y,domain:F,bridgeUrl:_,propsDef:$,dimensions:{width:Ce,height:ue},autoResize:ee,allowedParentDomains:te,attributes:J,defaultContext:Nn,containerTemplate:fn,prerenderTemplate:Wn,validate:ln,logger:H,eligible:hn}}(e),n=r.name,t=r.tag,o=r.defaultContext,i=r.propsDef,a=r.eligible,s=Gn(),f={},u=[],c=function(){var h=Bt();return!!(h&&h.tag===t&&h.childDomain===Y())},d=Pn(function(){if(c()){if(window.xprops)throw delete s.components[t],new Error("Can not register "+n+" as child - child already registered");var h=function(w){var y=w.propsDef,F=w.autoResize,_=w.allowedParentDomains,T=[],$=Bt(),z;if(!$)throw new Error("No child payload found");if($.version!=="9_0_63")throw new Error("Parent window has zoid version "+$.version+", child window has version 9_0_63");var D=$.uid,j=$.parentDomain,ee=$.exports,Ae=$.context,te=$.props,ye=function(H){var pe=H.type;if(pe==="opener")return jr("opener",bn(window));if(pe==="parent"&&typeof H.distance=="number")return jr("parent",function(nn,qe){return qe===void 0&&(qe=1),function(on,Ge){Ge===void 0&&(Ge=1);for(var Ke=on,vn=0;vn<Ge;vn++){if(!Ke)return;Ke=Be(Ke)}return Ke}(nn,Xr(nn)-qe)}(window,H.distance));if(pe==="global"&&H.uid&&typeof H.uid=="string"){var le=H.uid,Ce=Nr(window);if(!Ce)throw new Error("Can not find ancestor window");for(var ve=0,ue=_n(Ce);ve<ue.length;ve++){var U=ue[ve];if(be(U)){var ce=Gn(U);if(ce&&ce.windows&&ce.windows[le])return ce.windows[le]}}}throw new Error("Unable to find "+pe+" parent component window")}($.parent),J=qt(ye,j,ee),cn=J.show,Nn=J.hide,dn=J.close,fn=function(){return ye},Rn=function(){return j},Wn=function(H){T.push(H)},ln=function(H){return p.try(function(){if(J&&J.onError)return J.onError(H);throw H})},tn=function(H){return J.resize.fireAndForget({width:H.width,height:H.height})},hn=function(H,pe,le){le===void 0&&(le=!1);var Ce=function(ue,U,ce,nn,qe,on){on===void 0&&(on=!1);for(var Ge={},Ke=0,vn=Object.keys(ce);Ke<vn.length;Ke++){var Dn=vn[Ke],an=U[Dn];if(!an||!an.sameDomain||nn===Y(window)&&be(ue)){var Vn=$t(U,0,Dn,ce[Dn],qe);Ge[Dn]=Vn,an&&an.alias&&!Ge[an.alias]&&(Ge[an.alias]=Vn)}}if(!on)for(var Fn=0,Jn=Object.keys(U);Fn<Jn.length;Fn++){var Zn=Jn[Fn];ce.hasOwnProperty(Zn)||(Ge[Zn]=$t(U,0,Zn,void 0,qe))}return Ge}(ye,y,H,pe,{show:cn,hide:Nn,close:dn,focus:To,onError:ln,resize:tn,onProps:Wn,getParent:fn,getParentDomain:Rn,uid:D},le);z?Un(z,Ce):z=Ce;for(var ve=0;ve<T.length;ve++)(0,T[ve])(z)},pn=function(H){return p.try(function(){return hn(H,j,!0)})};return{init:function(){return p.try(function(){return function(H,pe){if(!Qe(H,pe))throw new Error("Can not be rendered by domain: "+pe)}(_,j),Nt(ye),function(){window.addEventListener("beforeunload",function(){J.checkClose.fireAndForget()}),window.addEventListener("unload",function(){J.checkClose.fireAndForget()}),nt(ye,function(){kt()})}(),J.init({updateProps:pn,close:kt})}).then(function(){return(H=F.width,pe=H!==void 0&&H,le=F.height,Ce=le!==void 0&&le,ve=F.element,vt(ve===void 0?"body":ve).catch(fe).then(function(ue){return{width:pe,height:Ce,element:ue}})).then(function(ue){var U=ue.width,ce=ue.height,nn=ue.element;nn&&(U||ce)&&Ae!==Pe.POPUP&&Et(nn,function(qe){tn({width:U?qe.width:void 0,height:ce?qe.height:void 0})},{width:U,height:ce})});var H,pe,le,Ce,ve}).catch(function(H){ln(H)})},getProps:function(){return z||(hn(function(H,pe,le){var Ce=le.type,ve=le.uid,ue;if(Ce==="raw")ue=le.value;else if(Ce==="uid"){if(!be(H))throw new Error("Parent component window is on a different domain - expected "+Y()+" - can not retrieve props");var U=Gn(H);ue=jr("props",U&&U.props[ve])}if(!ue)throw new Error("Could not find props");return qt(H,pe,ue)}(ye,j,te),j),z)}}}(r);return h.init(),h}}),l=function h(w){var y,F=a({props:w=w||{}}),_=F.eligible,T=F.reason,$=w.onDestroy;w.onDestroy=function(){if(y&&_&&u.splice(u.indexOf(y),1),$)return $.apply(void 0,arguments)};var z=Ht(r);z.init(),_?z.setProps(w):w.onDestroy&&w.onDestroy(),Gr.register(function(j){z.destroy(j||new Error("zoid destroyed all components"))});var D=function(j,ee,Ae){return p.try(function(){if(!_){var te=new Error(T||n+" component is not eligible");return z.destroy(te).then(function(){throw te})}if(!xn(j))throw new Error("Must pass window to renderTo");return function(ye,J){return p.try(function(){if(ye.window)return gr(ye.window).getType();if(J){if(J!==Pe.IFRAME&&J!==Pe.POPUP)throw new Error("Unrecognized context: "+J);return J}return o})}(w,Ae)}).then(function(te){return ee=function(ye,J){if(J){if(typeof J!="string"&&!pt(J))throw new TypeError("Expected string or element selector to be passed");return J}if(ye===Pe.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(te,ee),z.render(j,ee,te)}).catch(function(te){return z.destroy(te).then(function(){throw te})})};return y=x({},z.getHelpers(),{isEligible:function(){return _},clone:function(j){var ee=(j===void 0?{}:j).decorate;return h((ee===void 0?mo:ee)(w))},render:function(j,ee){return D(window,j,ee)},renderTo:function(j,ee,Ae){return D(j,ee,Ae)}}),_&&u.push(y),y};if(d(),function(){var h=Sn("zoid_allow_delegate_"+n,function(){return!0}),w=Sn("zoid_delegate_"+n,function(y){return{parent:Ht(r,y.data.overrides,y.source)}});Yr.register(h.cancel),Yr.register(w.cancel)}(),s.components=s.components||{},s.components[t])throw new Error("Can not register multiple components with the same tag: "+t);return s.components[t]=!0,{init:l,instances:u,driver:function(h,w){var y={react:Fo,angular:Lo,vue:jo,angular2:Mo};if(!y[h])throw new Error("Could not find driver for framework: "+h);return f[h]||(f[h]=y[h].register(t,i,l,w)),f[h]},isChild:c,canRenderTo:function(h){return en(h,"zoid_allow_delegate_"+n).then(function(w){return w.data}).catch(function(){return!1})},registerChild:d}}function Uo(e){(function(){zn().initialized||(zn().initialized=!0,i=(o={on:Sn,send:en}).on,a=o.send,(s=zn()).receiveMessage=s.receiveMessage||function(f){return Mt(f,{on:i,send:a})},function(f){var u=f.on,c=f.send;ge().getOrSet("postMessageListener",function(){return gt(window,"message",function(d){(function(l,h){var w=h.on,y=h.send;p.try(function(){var F=l.source||l.sourceElement,_=l.origin||l.originalEvent&&l.originalEvent.origin,T=l.data;if(_==="null"&&(_="file://"),F){if(!_)throw new Error("Post message did not have origin domain");Mt({source:F,origin:_,data:T},{on:w,send:y})}})})(d,{on:u,send:c})})})}({on:Sn,send:en}),function(f){var u=f.on,c=f.send;ge("builtinListeners").getOrSet("helloListener",function(){var d=u("postrobot_hello",{domain:"*"},function(h){return Ot(h.source,{domain:h.origin}),{instanceID:Ct()}}),l=Nr();return l&&$r(l,{send:c}).catch(function(h){}),d})}({on:Sn,send:en}));var o,i,a,s})();var r=$o(e),n=function(o){return r.init(o)};n.driver=function(o,i){return r.driver(o,i)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(o){return r.canRenderTo(o)},n.instances=r.instances;var t=r.registerChild();return t&&(window.xprops=n.xprops=t.getProps()),n}function Gt(e){var r=Gr.all(e);return Gr=lr(),r}var Yt=Gt;function Bo(e){return Yt(),delete window.__zoid_9_0_63__,function(){(function(){for(var n=ge("responseListeners"),t=0,o=n.keys();t<o.length;t++){var i=o[t],a=n.get(i);a&&(a.cancelled=!0),n.del(i)}})(),(r=ge().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_10_0_42__}(),Yr.all(e)}}])})})(so);var tr=so.exports;const ri=({uid:m})=>`
    #${m} iframe.${m}_prerender-frame {
        display: inline-block;
        position: absolute;

        /* loader frame size hardcoded intentionally*/
        width: 150px;
        height: 300px;

        /* center iframe inside parent relative */
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
    }

    #${m} iframe {
        opacity: 0;
        transition: opacity .2s ease-in-out;
    }

    #${m} iframe.${m}_invisible {
        opacity: 0;
        z-index: -1;
    }

    #${m} iframe.${m}_visible {
        opacity: 1;
    }
`,ti=()=>`
    body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        position: fixed;
        top: 0;
        left: 0;
        margin: 0;
    }

    /* Active Animation */
    @-webkit-keyframes loader {
      from {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      to {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }

    @keyframes loader {
      from {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      to {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }


    .ui.loader.active,
    .ui.loader.visible {
      display: block;
    }
    .ui.loader {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      margin: 0;
      text-align: center;
      z-index: 1000;
      transform: translateX(-50%) translateY(-50%);
    }

    .ui.loader:before {
      position: absolute;
      content: '';
      top: 0;
      left: 50%;
      width: 100%;
      height: 100%;
      border-radius: 500rem;
      border: .2em solid rgba(0,0,0,.1);
    }

    .ui.loader:before {
      border: 0;
    }

    .ui.loader:after {
      position: absolute;
      content: '';
      top: 0;
      left: 50%;
      width: 100%;
      height: 100%;
      animation: loader .6s linear;
      animation-iteration-count: infinite;
      border-radius: 500rem;
      border-color: #e25468 transparent transparent;
      border-style: solid;
      border-width: .2em;
      box-shadow: 0 0 0 1px transparent;
    }


    .ui.inverted.dimmer .ui.loader,
    .ui.loader {
      width: 2.28571429rem;
      height: 2.28571429rem;
      font-size: 1em;
    }

    .ui.inverted.dimmer .ui.big.loader,
    .ui.big.loader {
      width: 3.71428571rem;
      height: 3.71428571rem;
      font-size: 1.28571429em;
    }

    .ui.loader:after,
    .ui.loader:before {
      width: 2.28571429rem;
      height: 2.28571429rem;
      margin: 0 0 0 -1.14285714rem;
    }

    .ui.big.loader:after,
    .ui.big.loader:before {
      width: 3.71428571rem;
      height: 3.71428571rem;
      margin: 0 0 0 -1.85714286rem;
    }
`,oi=({nonce:m,text:S})=>`
        <div class='preloader spinner'>
            <style ${m?`nonce="${m}"`:""}>
              ${ti()}
            </style>

            <div class='ui big active loader'>
              ${S?`<div class='content'>
                      <div class='ui text loader'>
                        ${S}
                      </div>
                    </div>`:""}
            </div>
        </div>
`,ii=({uid:m,themeColor:S,height:q,width:W,allowFullscreen:O})=>`
/* Modal Content/Box */
@keyframes ${m}_fadeIn {
  0% {
    opacity: 0;
  }
  50% {
    visibility: hidden;
    opacity: 0;
  }
  100% {
    visibility: visible;
    opacity: 1;
  }
}

#${m} {
  /* prevent container el from taking site space */
  height: 0;

  /* prevent special container cursors from leaking in*/
  cursor: default;
}

.${m}_has-modal-visible {
  /* modal is opened/visible, prevent scrolling */
  overflow: hidden;
}

.${m}_close:hover,
.${m}_close:focus {
  color: white;
  background: #${S};
  text-decoration: none;
  cursor: pointer;
}

.${m}_modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 5000000000;
  background: rgba(0, 0, 0, 0.7);
}

.${m}_modal-container {
  /* center the modal content */
  display: flex;
  justify-content: center;
  align-items: center;
}

.${m}_modal {
  width: ${W};
  max-width: 500px;
  height: ${q};
  max-height: 100%;
  z-index: 100;
  background: white;
  border: none;
  border-radius: 10px;

  /* modal box-shadow */
  -webkit-box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  -moz-box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding-box;
  background-clip: padding-box;
}

/* dark theme */
.${m}_modal.dark {
  background: #121212;
}

.${m}_closed {
  display: none;
}

.${m}_modal-content {
  width: 100%;
  height: 100%;
  overflow: hidden;

  border-radius: 10px;
}

.${m}_modal .close-button {
  position: absolute;
  z-index: 1;
  top: 10px;
  right: 20px;
  background: black;
  color: white;
  padding: 5px 10px;
  font-size: 1.3rem;
}

.${m}_container {
    height: 100%;
    width: 100%;
    position: relative;
}

.${m}_container iframe {
    height: 100%;
    width: 100%;
}

${O?`
    /** when display is narrower that 500px (mobile device)
    open modal in full screen */
    @media screen and (max-width: 500px) {
      .${m}_modal {
        height: 100%;
        width: 100%;
        border-radius: 0px;
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
      }
    }`:""}
`,ai=(m,S)=>`
<div class="${m}_modal-overlay ${m}_modal-container" id="${m}_modal-overlay"/>
<div class="${m}_modal ${S}" id="${m}_modal">
    <div class="${m}_modal-content">
        <div class="${m}_container"/>
    </div>
</div>
`;function Cr(){return typeof cordova<"u"}function uo(m,S){if(!Cr())throw new Error("Not running in Cordova");if(!cordova.InAppBrowser)return console.error("Tried to open a link in cordova.InAppBrowser, but it's undefined! For the best experience, it's recommended to include plugin 'cordova-plugin-inappbrowser' in your build. Falling back to window.open() instead. Url:",m),window.open(m,S),null;const q=cordova.InAppBrowser.open(m,S);return S==="_blank"?q:null}function si(m,S){const q=uo(m,"_blank");q==null||q.addEventListener("loadstop",W=>{const{url:O}=W;if(!((O.startsWith("https://api.pluggy.ai/")||O.startsWith("https://api.pluggy.dev/")||O.startsWith("http://localhost:9090/"))&&O.includes("/oauthCallback.html")))return;const x=new URLSearchParams(O.split("?")[1]),C=Object.fromEntries(x.entries());S(C),q.close()})}function ui(m){let S=!1;return function(...q){if(!S)return S=!0,m.apply(this,q)}}function ci(m){const{onError:S,onSuccess:q,onOpen:W,onClose:O,onEvent:b,onHide:x}=m,C=Object.assign({},m);return delete C.onError,delete C.onSuccess,delete C.onOpen,delete C.onClose,delete C.onEvent,delete C.onHide,Object.assign(Object.assign({},C),{onErrorProp:S,onSuccessProp:q,onOpenProp:W,onCloseProp:O,onEventProp:b,onHideProp:x})}window.__PLUGGY_CONNECT_SDK_VERSION="2.10.1";const di="react-pluggy-connect",fi="pluggy-connect-sdk";function co(){const{__PLUGGY_CONNECT_SDK_VERSION:m,__REACT_PLUGGY_CONNECT_SDK_VERSION:S}=window,q=[];if(S){const O=`${di}@${S}`;q.push(O)}const W=`${fi}@${m}`;return q.push(W),q}var oo=function(m,S,q,W){function O(b){return b instanceof q?b:new q(function(x){x(b)})}return new(q||(q=Promise))(function(b,x){function C(Q){try{X(W.next(Q))}catch(We){x(We)}}function M(Q){try{X(W.throw(Q))}catch(We){x(We)}}function X(Q){Q.done?b(Q.value):O(Q.value).then(C,M)}X((W=W.apply(m,S||[])).next())})};const li="https://connect.pluggy.ai";let Or,fo;function Ln(m){return`${fo}_${m}`}function hi(){return Or||(Or=tr.create({tag:"pluggy-connect-widget",url:({props:m})=>{const{url:S=li}=m;return S},dimensions:{width:"320px",height:"568px"},props:{connectToken:{type:"string"},url:{type:"string",required:!1},includeSandbox:{type:"boolean",required:!1},allowConnectInBackground:{type:"boolean",required:!1},allowFullscreen:{type:"boolean",required:!1},updateItem:{type:"string",required:!1},connectorTypes:{type:"array",required:!1},connectorIds:{type:"array",required:!1},countries:{type:"array",required:!1},selectedConnectorId:{type:"number",required:!1},language:{type:"string",required:!1},theme:{type:"string",required:!1},moveSecurityData:{type:"string",required:!1},products:{type:"array",required:!1},openFinanceParameters:{type:"object",required:!1},sdkVersion:{type:"array",required:!1,default:()=>co()},_runningInCordova:{type:"boolean",required:!1,default:()=>Cr()},forceOauthInBrowser:{type:"boolean",required:!1},forceAskForCredentials:{type:"boolean",required:!1},onSuccessProp:{type:"function",required:!1},onErrorProp:{type:"function",required:!1},onOpenProp:{type:"function",required:!1},onHideProp:{type:"function",required:!1},onCloseProp:{type:"function",required:!1},onEventProp:{type:"function",required:!1}},attributes:{iframe:{scrolling:"no",title:"Pluggy"},popup:{scrolling:"no",title:"Pluggy"}},prerenderTemplate({doc:m,props:S}){const q=m.createElement("html");return q.innerHTML=oi({nonce:S.cspNonce}),q},containerTemplate({doc:m,dimensions:{height:S,width:q},close:W,uid:O,frame:b,prerenderFrame:x,event:C,props:M}){if(!x||!b)throw new Error("Unexpected state: prerenderFrame or frame not defined");fo=O;const X=m.createElement("div"),Q=M.theme||"light";X.id=O,X.innerHTML=ai(O,Q);const We=X.querySelector(`.${O}_container`);if(!We)throw new Error("Unexpected state: not found frame container");const Tn=Ln("visible"),gn=Ln("invisible"),yn=Ln("prerender-frame");We.appendChild(b),We.appendChild(x);const p=m.createElement("style"),En=M.allowFullscreen!==void 0?M.allowFullscreen:!0;p.innerHTML=[ii({uid:O,themeColor:"fafafa",height:S,width:q,allowFullscreen:En}),ri({uid:O})].join(`
`),X.appendChild(p),x.classList.add(yn),x.classList.add(Tn),b.classList.add(gn),C.on(tr.EVENT.RENDERED,()=>{x.classList.remove(Tn),x.classList.add(gn),b.classList.remove(gn),b.classList.add(Tn)});const sn=Ln("has-modal-visible");C.on(tr.EVENT.DISPLAY,()=>{document.body.classList.add(sn);const{onOpenProp:Xe}=M;Xe==null||Xe()});const Ye=M.onCloseProp?ui(M.onCloseProp):null;return C.on(tr.EVENT.CLOSE,()=>{document.body.classList.remove(sn),Ye==null||Ye()}),window.addEventListener("message",Xe=>{const{origin:Be,data:bn}=Xe,{url:Mn="https://connect.pluggy.ai"}=M;if(Be!==Mn)return;let Ve;try{Ve=JSON.parse(bn)}catch{return}if(Ve.type==="OAUTH_OPEN"&&Cr()){const{message:Y}=Ve;si(Y,be=>{var Je;return(Je=b.contentWindow)===null||Je===void 0?void 0:Je.postMessage(be,"*")});return}if(Ve.type==="LINK_OPEN"&&Cr()){const{message:Y}=Ve;uo(Y,"_system");return}if(Ve.type==="CONTINUE_IN_BACKGROUND"){document.body.classList.remove(sn);return}},!1),document.addEventListener("keydown",function Xe(Be){Be.key==="Escape"&&(W(),document.removeEventListener("keydown",Xe))}),X}})),Or}let pi=class{constructor(S){this.zoidComponent=hi();const q=Object.assign(Object.assign({},S),{sdkVersion:co()});this.componentPropsExtendedAdapted=ci(q)}init(S){const q=S||(document.getElementsByTagName("body")||document.getElementsByTagName("html")||document.getElementsByTagName("div"))[0];return this.componentInstance=this.zoidComponent(this.componentPropsExtendedAdapted),this.componentInstance.render(q).catch(W=>{throw console.error("Failed to render <PluggyConnect /> component",W),W})}destroy(){return Or=void 0,tr.destroy()}show(){return oo(this,void 0,void 0,function*(){if(!this.componentInstance)throw new Error("Failed to show <PluggyConnect /> component: component not initialized");try{yield this.componentInstance.show();const S=Ln("has-modal-visible");document.body.classList.add(S)}catch(S){throw console.error("Failed to show <PluggyConnect /> component",S),S}})}hide(){return oo(this,void 0,void 0,function*(){if(!this.componentInstance)throw new Error("Failed to hide <PluggyConnect /> component: component not initialized");try{yield this.componentInstance.hide();const S=Ln("has-modal-visible");document.body.classList.remove(S)}catch(S){throw console.error("Failed to hide <PluggyConnect /> component",S),S}})}};window.__REACT_PLUGGY_CONNECT_SDK_VERSION="2.9.0";const vi=m=>{const S=wn.useRef(m),q=wn.useCallback(W=>{const{current:O}=S,{innerRef:b,onLoadError:x}=O;if(W===null){b==null||b(null);return}const C=new pi(O);C.init(W).then(()=>{try{b==null||b({show:C.show.bind(C),hide:C.hide.bind(C)})}catch(M){console.error("Unexpected error caught in <PluggyConnect/> when calling innerRef prop:",M)}}).catch(M=>{x==null||x(M)})},[]);return Yo.createElement("div",{id:"PluggyConnect",ref:q})},io="https://api.pluggy.ai",Jr={getAccessToken:async()=>{throw console.warn("Pluggy keys missing! Falling back to sandbox mode or error."),new Error("Missing Pluggy API Keys in .env")},createConnectToken:async()=>{const m=await Jr.getAccessToken();return(await to.post(`${io}/connect_token`,{options:{clientUserId:"user_"+Math.random().toString(36).substr(2,9)}},{headers:{"X-API-KEY":m}})).data.accessToken},fetchTransactions:async m=>{const S=await Jr.getAccessToken();return(await to.get(`${io}/transactions`,{headers:{"X-API-KEY":S},params:{accountId:m}})).data.results.map(W=>({description:W.description,amount:Math.abs(W.amount),date:W.date?W.date.split("T")[0]:new Date().toISOString().split("T")[0],category:W.category||"Geral",establishment:W.merchant?W.merchant.name:"Desconhecido",type:W.amount<0?"expense":"income",recurrence:"none"}))}},mi=({isOpen:m,onClose:S,onImport:q})=>{const[W,O]=wn.useState(null),[b,x]=wn.useState(!1),[C,M]=wn.useState(null);wn.useEffect(()=>{m&&!W&&(x(!0),Jr.createConnectToken().then(Q=>{O(Q),x(!1)}).catch(Q=>{console.error(Q),M("Erro ao iniciar conexo com o banco. Verifique as chaves de API."),x(!1)}))},[m]);const X=async Q=>{try{x(!0),O(null),alert(`Conexo realizada com sucesso! ID: ${Q.item.id}. (Em produo, importaramos os dados agora.)`),S()}catch(We){console.error(We),M("Erro ao processar dados da conexo.")}finally{x(!1)}};return m?k.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",children:k.jsxs(ao,{className:"w-full max-w-lg h-[600px] flex flex-col relative animate-slide-up bg-white dark:bg-slate-900 shadow-2xl overflow-hidden rounded-3xl",children:[k.jsx("button",{onClick:S,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors z-20 bg-white/80 dark:bg-black/50 rounded-full p-1",children:k.jsx(Jo,{size:20})}),C?k.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6 space-y-4",children:[k.jsx(Zo,{size:48,className:"text-amber-500"}),k.jsx("h3",{className:"text-lg font-bold",children:"Falha na Conexo"}),k.jsx("p",{className:"text-muted text-sm",children:C}),k.jsx("button",{onClick:S,className:"text-primary font-bold",children:"Fechar"})]}):b?k.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[k.jsx(Ko,{size:40,className:"text-primary animate-spin"}),k.jsx("p",{className:"text-sm font-medium text-muted",children:"Iniciando ambiente seguro..."})]}):W?k.jsx("div",{className:"flex-1 w-full bg-white",children:k.jsx(vi,{connectToken:W,includeSandbox:!0,onSuccess:X,onError:Q=>M("Erro no widget Pluggy: "+JSON.stringify(Q))})}):null]})}):null},Pi=({transactions:m,onAddClick:S,onImportTransactions:q})=>{const[W,O]=wn.useState(!1),b=wn.useMemo(()=>{const C={};return m.forEach(M=>{C[M.date]||(C[M.date]=[]),C[M.date].push(M)}),Object.keys(C).sort((M,X)=>new Date(X).getTime()-new Date(M).getTime()).map(M=>({date:M,items:C[M]}))},[m]),x=C=>{const M=new Date(C),X=new Date,Q=new Date;return Q.setDate(Q.getDate()-1),C===X.toISOString().split("T")[0]?"Hoje":C===Q.toISOString().split("T")[0]?"Ontem":M.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long"})};return k.jsxs("div",{className:"p-4 space-y-4 pb-24 min-h-screen bg-background animate-slide-up",children:[k.jsxs("header",{className:"flex items-center justify-between pt-2 pb-2",children:[k.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Extrato"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("button",{onClick:()=>O(!0),className:"p-1 rounded-full bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 hover:scale-105 transition-all w-10 h-10 flex items-center justify-center overflow-hidden",title:"Conectar Open Finance",children:k.jsx("img",{src:"https://raw.githubusercontent.com/openfinancebrasil/marca/main/open-finance-logo.png",alt:"Open Finance",className:"w-full h-full object-contain p-1",onError:C=>{C.target.style.display="none",C.target.parentElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>'}})}),k.jsx("button",{className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-muted hover:text-foreground transition-colors",children:k.jsx(Xo,{size:20})}),k.jsx("button",{className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-muted hover:text-foreground transition-colors",children:k.jsx(Qo,{size:20})})]})]}),m.length===0?k.jsx("div",{className:"mt-12",children:k.jsx(Vo,{title:"Sem lanamentos",message:"Voc ainda no registrou nenhuma movimentao.",actionLabel:"Adicionar Agora",onAction:S||(()=>{})})}):k.jsx("div",{className:"space-y-6",children:b.map(C=>k.jsxs("div",{className:"space-y-3",children:[k.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-widest pl-2 sticky top-0 bg-background/80 backdrop-blur-md py-2 z-10",children:x(C.date)}),C.items.map((M,X)=>k.jsxs(ao,{className:"flex items-center justify-between p-4 active:scale-[0.99] transition-transform",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${M.type==="income"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:M.type==="income"?k.jsx(ei,{size:20}):k.jsx(ni,{size:20})}),k.jsxs("div",{children:[k.jsx("p",{className:"font-bold text-foreground text-sm",children:M.description}),k.jsx("p",{className:"text-[10px] text-muted font-medium uppercase",children:M.category})]})]}),k.jsxs("span",{className:`font-bold text-sm ${M.type==="income"?"text-emerald-500":"text-rose-500"}`,children:[M.type==="expense"?"- ":"+ ","R$ ",Number(M.amount).toFixed(2).replace(".",",")]})]},M.id||X))]},C.date))}),k.jsx(mi,{isOpen:W,onClose:()=>O(!1),onImport:C=>{q&&q(C)}})]})};export{Pi as TransactionsPage};
